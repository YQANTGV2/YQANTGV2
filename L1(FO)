getgenv().FakeOutEnabled = true
getgenv()._FakeOutDone = false -- ğŸŸ¢ Reset láº¡i tráº¡ng thÃ¡i

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local Camera = workspace.CurrentCamera
local LocalPlayer = Players.LocalPlayer

-- Reset láº¡i náº¿u nhÃ¢n váº­t respawn
LocalPlayer.CharacterAdded:Connect(function()
    getgenv()._FakeOutDone = false
end)

-- Ngáº¯t káº¿t ná»‘i cÅ© náº¿u cÃ³
if getgenv()._Connection then
    getgenv()._Connection:Disconnect()
    getgenv()._Connection = nil
end

getgenv()._Connection = RunService.Heartbeat:Connect(function()
    if not getgenv().FakeOutEnabled then return end

    local char = LocalPlayer.Character
    local hum = char and char:FindFirstChildOfClass("Humanoid")
    local hrp = char and char:FindFirstChild("HumanoidRootPart")
    if not hum or not hrp then return end

    if hum.Health > 0 and hum.Health < 35 and not getgenv()._FakeOutDone then
        getgenv()._FakeOutDone = true

        -- Ghi láº¡i vá»‹ trÃ­ camera hiá»‡n táº¡i
        local savedCam = Camera.CFrame

        -- Táº¡o Part giá»¯ nhÃ¢n váº­t khÃ´ng rÆ¡i
        local pad = Instance.new("Part", workspace)
        pad.Anchored = true
        pad.Size = Vector3.new(10, 1, 10)
        pad.Position = Vector3.new(9999, 0, 9999)
        pad.Name = "FakeOutPad_" .. LocalPlayer.Name
        pad.Transparency = 1
        pad.CanCollide = true

        -- Dá»‹ch chuyá»ƒn nhÃ¢n váº­t tá»›i vÃ¹ng khÃ´ng ai tháº¥y
        hrp.CFrame = CFrame.new(pad.Position + Vector3.new(0, 5, 0))

        -- Camera cá»‘ Ä‘á»‹nh á»Ÿ vá»‹ trÃ­ cÅ©
        local fakeCam = Instance.new("Part", workspace)
        fakeCam.Anchored = true
        fakeCam.Transparency = 1
        fakeCam.CanCollide = false
        fakeCam.CFrame = savedCam

        Camera.CameraSubject = fakeCam
        Camera.CameraType = Enum.CameraType.Scriptable

        -- áº¨n nhÃ¢n váº­t
        for _, v in ipairs(char:GetDescendants()) do
            if v:IsA("BasePart") then
                v.Transparency = 1
                v.CanCollide = false
            elseif v:IsA("Decal") then
                v.Transparency = 1
            end
        end

        -- Sau vÃ i giÃ¢y, tá»± tá»­
        task.delay(4, function()
            for _ = 1, 3 do
                pcall(function()
                    hum:TakeDamage(9999)
                end)
                task.wait(0.5)
            end
        end)
    end
end)
